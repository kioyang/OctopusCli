/**
* 定义请求方法。
* @author {{author}}-@{{company}}
* @date {{date}}
*/

import { stringify } from 'qs'
import request from '@/utils/request'
import api from './apiConfig'

const pageSize = 10;

export async function getList(params) {
  params.page = params.current;
  params.limit = params.pageSize;
  delete params.current;
  delete params.pageSize;
  return request(`${api().list}?${stringify(params)}`).then((res = { content}) => {
    let data = {
      list: res.content && res.content.list,
      pagination: {
        current: params.page,
        pageSize,
        total: 0,
      },
    };
    if (res && res.code === 0 || res.code === '0') {
      data = {
        list: res.content && res.content.list,
        pagination: res.pagination || data.pagination,
      };
    }
    return Promise.resolve(data);
  });
}

export async function add(params) {
  return request(`${api().add}?${stringify(params)}`).then(res => {
    return Promise.resolve(res);
  });
}
export async function edit(params) {
  return request(`${api().edit}?${stringify(params)}`).then(res => {
    return Promise.resolve(res);
  });
}

export async function deleteItem(params) {
  return request(`${api().delete}?${stringify(params)}`).then(res => {
    return Promise.resolve(res);
  });
}
